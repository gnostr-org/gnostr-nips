<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>72</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<h1 id="nip-72">NIP-72</h1>
<h2 id="moderated-communities-reddit-style">Moderated Communities
(Reddit Style)</h2>
<p><code>draft</code> <code>optional</code></p>
<p>The goal of this NIP is to enable public communities. It defines the
replaceable event <code>kind:34550</code> to define the community and
the current list of moderators/administrators. Users that want to post
into the community, simply tag any Nostr event with the community’s
<code>a</code> tag. Moderators may issue an approval event
<code>kind:4550</code>.</p>
<h1 id="community-definition">Community Definition</h1>
<p><code>Kind:34550</code> SHOULD include any field that helps define
the community and the set of moderators. <code>relay</code> tags MAY be
used to describe the preferred relay to download requests and approvals.
A community definition event’s <code>d</code> tag MAY double as its
name, but if a <code>name</code> tag is provided, it SHOULD be displayed
instead of the <code>d</code> tag.</p>
<pre class="jsonc"><code>{
  &quot;created_at&quot;: &lt;Unix timestamp in seconds&gt;,
  &quot;kind&quot;: 34550,
  &quot;tags&quot;: [
    [&quot;d&quot;, &quot;&lt;community-d-identifier&gt;&quot;],
    [&quot;name&quot;, &quot;&lt;Community name&gt;&quot;],
    [&quot;description&quot;, &quot;&lt;Community description&gt;&quot;],
    [&quot;image&quot;, &quot;&lt;Community image url&gt;&quot;, &quot;&lt;Width&gt;x&lt;Height&gt;&quot;],

    //.. other tags relevant to defining the community

    // moderators
    [&quot;p&quot;, &quot;&lt;32-bytes hex of a pubkey1&gt;&quot;, &quot;&lt;optional recommended relay URL&gt;&quot;, &quot;moderator&quot;],
    [&quot;p&quot;, &quot;&lt;32-bytes hex of a pubkey2&gt;&quot;, &quot;&lt;optional recommended relay URL&gt;&quot;, &quot;moderator&quot;],
    [&quot;p&quot;, &quot;&lt;32-bytes hex of a pubkey3&gt;&quot;, &quot;&lt;optional recommended relay URL&gt;&quot;, &quot;moderator&quot;],

    // relays used by the community (w/optional marker)
    [&quot;relay&quot;, &quot;&lt;relay hosting author kind 0&gt;&quot;, &quot;author&quot;],
    [&quot;relay&quot;, &quot;&lt;relay where to send and receive requests&gt;&quot;, &quot;requests&quot;],
    [&quot;relay&quot;, &quot;&lt;relay where to send and receive approvals&gt;&quot;, &quot;approvals&quot;],
    [&quot;relay&quot;, &quot;&lt;relay where to post requests to and fetch approvals from&gt;&quot;]
  ],
  // other fields...
}</code></pre>
<h1 id="posting-to-a-community">Posting to a community</h1>
<p>Any Nostr event can be posted to a community. Clients MUST add one or
more community <code>a</code> tags, each with a recommended relay.</p>
<pre class="jsonc"><code>{
  &quot;kind&quot;: 1,
  &quot;tags&quot;: [
    [&quot;a&quot;, &quot;34550:&lt;community event author pubkey&gt;:&lt;community-d-identifier&gt;&quot;, &quot;&lt;optional-relay-url&gt;&quot;],
  ],
  &quot;content&quot;: &quot;hello world&quot;,
  // other fields...
}</code></pre>
<h1 id="moderation">Moderation</h1>
<p>Anyone may issue an approval event to express their opinion that a
post is appropriate for a community. Clients MAY choose which approval
events to honor, but SHOULD at least use ones published by the group’s
defined moderators.</p>
<p>An approval event MUST include one or more community <code>a</code>
tags, an <code>e</code> or <code>a</code> tag pointing to the post, and
the <code>p</code> tag of the author of the post (for approval
notifications). <code>a</code> tag prefixes can be used to disambiguate
between community and replaceable event pointers (community
<code>a</code> tags always begin with <code>34550</code>).</p>
<p>The event SHOULD also include the JSON-stringified
<code>post request</code> event inside the <code>.content</code>, and a
<code>k</code> tag with the original post’s event kind to allow
filtering of approved posts by kind.</p>
<p>Moderators MAY request deletion of their approval of a post at any
time using <a href="09.md.css.html">NIP-09 event deletion requests</a>.</p>
<pre class="jsonc"><code>{
  &quot;pubkey&quot;: &quot;&lt;32-bytes lowercase hex-encoded public key of the event creator&gt;&quot;,
  &quot;kind&quot;: 4550,
  &quot;tags&quot;: [
    [&quot;a&quot;, &quot;34550:&lt;event-author-pubkey&gt;:&lt;community-d-identifier&gt;&quot;, &quot;&lt;optional-relay-url&gt;&quot;],
    [&quot;e&quot;, &quot;&lt;post-id&gt;&quot;, &quot;&lt;optional-relay-url&gt;&quot;],
    [&quot;p&quot;, &quot;&lt;port-author-pubkey&gt;&quot;, &quot;&lt;optional-relay-url&gt;&quot;],
    [&quot;k&quot;, &quot;&lt;post-request-kind&gt;&quot;]
  ],
  &quot;content&quot;: &quot;&lt;the full approved event, JSON-encoded&gt;&quot;,
  // other fields...
}</code></pre>
<p>It’s recommended that multiple moderators approve posts to avoid
deleting them from the community when a moderator is removed from the
owner’s list. In case the full list of moderators must be rotated, the
new moderator set must sign new approvals for posts in the past or the
community will restart. The owner can also periodically copy and re-sign
of each moderator’s approval events to make sure posts don’t disappear
with moderators.</p>
<p>Approvals of replaceable events can be created in three ways:</p>
<ol type="1">
<li>By tagging the replaceable event as an <code>e</code> tag if
moderators want to approve each individual change to the replaceable
event</li>
<li>By tagging the replaceable event as an <code>a</code> tag if the
moderator authorizes the replaceable event author to make changes
without additional approvals and</li>
<li>By tagging the replaceable event with both its <code>e</code> and
<code>a</code> tag which empowers clients to display the original and
updated versions of the event, with appropriate remarks in the UI.</li>
</ol>
<p>Since relays are instructed to delete old versions of a replaceable
event, the <code>content</code> of an approval using an <code>e</code>
tag MUST have the specific version of the event or clients might not be
able to find that version of the content anywhere.</p>
<p>Clients SHOULD evaluate any non-<code>34550:*</code> <code>a</code>
tag as posts to be approved for all <code>34550:*</code> <code>a</code>
tags.</p>
<h1 id="cross-posting">Cross-posting</h1>
<p>Clients MAY support cross-posting between communities by posting a
NIP 18 <code>kind 6</code> or <code>kind 16</code> repost to one or more
communities using <code>a</code> tags as described above. The
<code>content</code> of the repost MUST be the original event, not the
approval event.</p>
</body>
</html>
