<h1 id="nip-88">NIP-88</h1>
<h2 id="polls">Polls</h2>
<p><code>draft</code> <code>optional</code></p>
<p>This NIP defines the event scheme that describe Polls on nostr.</p>
<p>The NIP makes the following tradeoffs.</p>
<ol type="1">
<li>All votes are public.</li>
<li>All votes are editable (latest response by timestamp considered last
vote)</li>
</ol>
<h2 id="events">Events</h2>
<h3 id="poll-event">Poll Event</h3>
<p>The poll event is defined as a <code>kind:1068</code> event.</p>
<ul>
<li><strong>content</strong> key holds the label for the poll.</li>
</ul>
<p>Major tags in the poll event are:</p>
<ul>
<li><strong>option</strong>: The option tags contain an OptionId(any
alphanumeric) field, followed by an option label field.</li>
<li><strong>relay</strong>: One or multiple tags that the poll is
expecting respondents to respond on.</li>
<li><strong>polltype</strong>: can be &#x201C;singlechoice&#x201D;, &#x201C;multiplechoice&#x201D;,
or &#x201C;rankedchoice&#x201D;. Polls that do not have a polltype should be
considered a &#x201C;singlechoice&#x201D; poll.</li>
</ul>
<p>Example Event</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;&quot;</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;created_at&quot;</span><span class="fu">:</span> <span class="dv">1719888496</span><span class="fu">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;9d1b6b9562e66f2ecf35eb0a3c2decc736c47fddb13d6fb8f87185a153ea3634&quot;</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;kind&quot;</span><span class="fu">:</span> <span class="dv">1068</span><span class="fu">,</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pubkey&quot;</span><span class="fu">:</span> <span class="st">&quot;dee45a23c4f1d93f3a2043650c5081e4ac14a778e0acbef03de3768e4f81ac7b&quot;</span><span class="fu">,</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;sig&quot;</span><span class="fu">:</span> <span class="st">&quot;7fa93bf3c430eaef784b0dacc217d3cd5eff1c520e7ef5d961381bc0f014dde6286618048d924808e54d1be03f2f2c2f0f8b5c9c2082a4480caf45a565ca9797&quot;</span><span class="fu">,</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;tags&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">&quot;label&quot;</span><span class="ot">,</span> <span class="st">&quot;Pineapple on Pizza&quot;</span><span class="ot">],</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">&quot;option&quot;</span><span class="ot">,</span> <span class="st">&quot;qj518h583&quot;</span><span class="ot">,</span> <span class="st">&quot;Yay&quot;</span><span class="ot">],</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">&quot;option&quot;</span><span class="ot">,</span> <span class="st">&quot;gga6cdnqj&quot;</span><span class="ot">,</span> <span class="st">&quot;Nay&quot;</span><span class="ot">],</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">&quot;relay&quot;</span><span class="ot">,</span><span class="st">&quot;&lt;relay url1&gt;&quot;</span><span class="ot">],</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">&quot;relay&quot;</span><span class="ot">,</span> <span class="st">&quot;&lt;relay url2&gt;&quot;</span><span class="ot">],</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">&quot;polltype&quot;</span><span class="ot">,</span> <span class="st">&quot;singlechoice&quot;</span><span class="ot">]</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="responses">Responses</h3>
<p>The response event is a <code>kind:30068</code> event. It contains a
d tag with the poll event it is referencing, followed by one or more
response tags.</p>
<ul>
<li><strong>response</strong> : The tag contains &#x201C;response&#x201D; as it&#x2019;s
first positional argument followed by the option Id selected.</li>
</ul>
<p>Example Response Event</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;&quot;</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;created_at&quot;</span><span class="fu">:</span> <span class="dv">1720097117</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;60a005e32e9596c3f544a841a9bc4e46d3020ca3650d6a739c95c1568e33f6d8&quot;</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;kind&quot;</span><span class="fu">:</span> <span class="dv">30068</span><span class="fu">,</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pubkey&quot;</span><span class="fu">:</span> <span class="st">&quot;1bc70a0148b3f316da33fe7e89f23e3e71ac4ff998027ec712b905cd24f6a411&quot;</span><span class="fu">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;sig&quot;</span><span class="fu">:</span> <span class="st">&quot;30071a633c65db8f3a075c7a8de757fbd8ce65e3607f4ba287fe6d7fbf839a380f94ff4e826fbba593f6faaa13683b7ea9114ade140720ecf4927010ebf3e44f&quot;</span><span class="fu">,</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;tags&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">&quot;d&quot;</span><span class="ot">,</span> <span class="st">&quot;1fc80cf813f1af33d5a435862b7ef7fb96b47e68a48f1abcadf8081f5a545550&quot;</span><span class="ot">],</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">&quot;response&quot;</span><span class="ot">,</span> <span class="st">&quot;gga6cdnqj&quot;</span><span class="ot">],</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">&quot;response&quot;</span><span class="ot">,</span> <span class="st">&quot;m3agjsdq1&quot;</span><span class="ot">]</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="poll-types">Poll Types</h3>
<p>Poll Types can be configured in the settings object of the poll, the
setting dictates how multiple response tags are handled in the
<code>kind:30068</code> event.</p>
<ul>
<li><strong>PollType: singlechoice</strong>: The first response tag is
to be considered the actual response.</li>
<li><strong>PollType: multiplechoice</strong>: The first response tag
pointing to each id is considered the actual response, without
considering the order of the response tags.</li>
<li><strong>PollType: rankedchoice</strong>: The first response tag
pointing to each id is the considered the actual response, while also
taking into account the order of the response tags.</li>
</ul>
<h3 id="counting-results">Counting Results</h3>
<p>Results can be queried by fetching <code>kind:30068</code> events
from the relays specified in the poll. The results displayed should only
be 1 vote event per pubkey. In case of multiple events for a pubkey, the
event with the largest timestamp should be considered.</p>
<h3 id="curation">Curation</h3>
<p>The clients may configure fetching results by specific people. This
can be achieved by creating <code>kind:30000</code> follow sets, and
fetching results only from the follow set. Clients can also employ other
curation algorithms, like Proof Of Work and Web of Trust scores for
result curations.</p>
