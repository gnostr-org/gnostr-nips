<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>11</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="nip-11">NIP-11</h1>
<h2 id="relay-information-document">Relay Information Document</h2>
<p><code>draft</code> <code>optional</code></p>
<p>Relays may provide server metadata to clients to inform them of
capabilities, administrative contacts, and various server attributes.
This is made available as a JSON document over HTTP, on the same URI as
the relay’s websocket.</p>
<p>When a relay receives an HTTP(s) request with an <code>Accept</code>
header of <code>application/nostr+json</code> to a URI supporting
WebSocket upgrades, they SHOULD return a document with the following
structure.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="er">&lt;string</span> <span class="er">identifying</span> <span class="er">relay&gt;</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="er">&lt;string</span> <span class="er">with</span> <span class="er">detailed</span> <span class="er">information&gt;</span><span class="fu">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pubkey&quot;</span><span class="fu">:</span> <span class="er">&lt;administrative</span> <span class="er">contact</span> <span class="er">pubkey&gt;</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;contact&quot;</span><span class="fu">:</span> <span class="er">&lt;administrative</span> <span class="er">alternate</span> <span class="er">contact&gt;</span><span class="fu">,</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;supported_nips&quot;</span><span class="fu">:</span> <span class="er">&lt;a</span> <span class="er">list</span> <span class="er">of</span> <span class="er">NIP</span> <span class="er">numbers</span> <span class="er">supported</span> <span class="er">by</span> <span class="er">the</span> <span class="er">relay&gt;</span><span class="fu">,</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;software&quot;</span><span class="fu">:</span> <span class="er">&lt;string</span> <span class="er">identifying</span> <span class="er">relay</span> <span class="er">software</span> <span class="er">URL&gt;</span><span class="fu">,</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;version&quot;</span><span class="fu">:</span> <span class="er">&lt;string</span> <span class="er">version</span> <span class="er">identifier&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Any field may be omitted, and clients MUST ignore any additional
fields they do not understand. Relays MUST accept CORS requests by
sending <code>Access-Control-Allow-Origin</code>,
<code>Access-Control-Allow-Headers</code>, and
<code>Access-Control-Allow-Methods</code> headers.</p>
<h2 id="field-descriptions">Field Descriptions</h2>
<h3 id="name">Name</h3>
<p>A relay may select a <code>name</code> for use in client software.
This is a string, and SHOULD be less than 30 characters to avoid client
truncation.</p>
<h3 id="description">Description</h3>
<p>Detailed plain-text information about the relay may be contained in
the <code>description</code> string. It is recommended that this contain
no markup, formatting or line breaks for word wrapping, and simply use
double newline characters to separate paragraphs. There are no
limitations on length.</p>
<h3 id="pubkey">Pubkey</h3>
<p>An administrative contact may be listed with a <code>pubkey</code>,
in the same format as Nostr events (32-byte hex for a
<code>secp256k1</code> public key). If a contact is listed, this
provides clients with a recommended address to send encrypted direct
messages (See <a href="17.md.html">NIP-17</a>) to a system administrator.
Expected uses of this address are to report abuse or illegal content,
file bug reports, or request other technical assistance.</p>
<p>Relay operators have no obligation to respond to direct messages.</p>
<h3 id="contact">Contact</h3>
<p>An alternative contact may be listed under the <code>contact</code>
field as well, with the same purpose as <code>pubkey</code>. Use of a
Nostr public key and direct message SHOULD be preferred over this.
Contents of this field SHOULD be a URI, using schemes such as
<code>mailto</code> or <code>https</code> to provide users with a means
of contact.</p>
<h3 id="supported-nips">Supported NIPs</h3>
<p>As the Nostr protocol evolves, some functionality may only be
available by relays that implement a specific <code>NIP</code>. This
field is an array of the integer identifiers of <code>NIP</code>s that
are implemented in the relay. Examples would include <code>1</code>, for
<code>"NIP-01"</code> and <code>9</code>, for <code>"NIP-09"</code>.
Client-side <code>NIPs</code> SHOULD NOT be advertised, and can be
ignored by clients.</p>
<h3 id="software">Software</h3>
<p>The relay server implementation MAY be provided in the
<code>software</code> attribute. If present, this MUST be a URL to the
project’s homepage.</p>
<h3 id="version">Version</h3>
<p>The relay MAY choose to publish its software version as a string
attribute. The string format is defined by the relay implementation. It
is recommended this be a version number or commit identifier.</p>
<h2 id="extra-fields">Extra Fields</h2>
<h3 id="server-limitations">Server Limitations</h3>
<p>These are limitations imposed by the relay on clients. Your client
should expect that requests which exceed these <em>practical</em>
limitations are rejected or fail immediately.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;limitation&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max_message_length&quot;</span><span class="fu">:</span> <span class="dv">16384</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max_subscriptions&quot;</span><span class="fu">:</span> <span class="dv">20</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max_filters&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max_limit&quot;</span><span class="fu">:</span> <span class="dv">5000</span><span class="fu">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max_subid_length&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max_event_tags&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max_content_length&quot;</span><span class="fu">:</span> <span class="dv">8196</span><span class="fu">,</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;min_pow_difficulty&quot;</span><span class="fu">:</span> <span class="dv">30</span><span class="fu">,</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;auth_required&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;payment_required&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;restricted_writes&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;created_at_lower_limit&quot;</span><span class="fu">:</span> <span class="dv">31536000</span><span class="fu">,</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;created_at_upper_limit&quot;</span><span class="fu">:</span> <span class="dv">3</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="er">...</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<ul>
<li><p><code>max_message_length</code>: this is the maximum number of
bytes for incoming JSON that the relay will attempt to decode and act
upon. When you send large subscriptions, you will be limited by this
value. It also effectively limits the maximum size of any event. Value
is calculated from <code>[</code> to <code>]</code> and is after UTF-8
serialization (so some unicode characters will cost 2-3 bytes). It is
equal to the maximum size of the WebSocket message frame.</p></li>
<li><p><code>max_subscriptions</code>: total number of subscriptions
that may be active on a single websocket connection to this relay. It’s
possible that authenticated clients with a (paid) relationship to the
relay may have higher limits.</p></li>
<li><p><code>max_filters</code>: maximum number of filter values in each
subscription. Must be one or higher.</p></li>
<li><p><code>max_subid_length</code>: maximum length of subscription id
as a string.</p></li>
<li><p><code>max_limit</code>: the relay server will clamp each filter’s
<code>limit</code> value to this number. This means the client won’t be
able to get more than this number of events from a single subscription
filter. This clamping is typically done silently by the relay, but with
this number, you can know that there are additional results if you
narrowed your filter’s time range or other parameters.</p></li>
<li><p><code>max_event_tags</code>: in any event, this is the maximum
number of elements in the <code>tags</code> list.</p></li>
<li><p><code>max_content_length</code>: maximum number of characters in
the <code>content</code> field of any event. This is a count of unicode
characters. After serializing into JSON it may be larger (in bytes), and
is still subject to the <code>max_message_length</code>, if
defined.</p></li>
<li><p><code>min_pow_difficulty</code>: new events will require at least
this difficulty of PoW, based on <a href="13.md.html">NIP-13</a>, or they
will be rejected by this server.</p></li>
<li><p><code>auth_required</code>: this relay requires <a
href="42.md.html">NIP-42</a> authentication to happen before a new connection
may perform any other action. Even if set to False, authentication may
be required for specific actions.</p></li>
<li><p><code>payment_required</code>: this relay requires payment before
a new connection may perform any action.</p></li>
<li><p><code>restricted_writes</code>: this relay requires some kind of
condition to be fulfilled in order to accept events (not necessarily,
but including <code>payment_required</code> and
<code>min_pow_difficulty</code>). This should only be set to
<code>true</code> when users are expected to know the relay policy
before trying to write to it – like belonging to a special pubkey-based
whitelist or writing only events of a specific niche kind or content.
Normal anti-spam heuristics, for example, do not qualify.</p></li>
<li><p><code>created_at_lower_limit</code>: ‘created_at’ lower
limit</p></li>
<li><p><code>created_at_upper_limit</code>: ‘created_at’ upper
limit</p></li>
</ul>
<h3 id="event-retention">Event Retention</h3>
<p>There may be a cost associated with storing data forever, so relays
may wish to state retention times. The values stated here are defaults
for unauthenticated users and visitors. Paid users would likely have
other policies.</p>
<p>Retention times are given in seconds, with <code>null</code>
indicating infinity. If zero is provided, this means the event will not
be stored at all, and preferably an error will be provided when those
are received.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;retention&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;kinds&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">0</span><span class="ot">,</span> <span class="dv">1</span><span class="ot">,</span> <span class="ot">[</span><span class="dv">5</span><span class="ot">,</span> <span class="dv">7</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">49</span><span class="ot">]]</span><span class="fu">,</span> <span class="dt">&quot;time&quot;</span><span class="fu">:</span> <span class="dv">3600</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;kinds&quot;</span><span class="fu">:</span> <span class="ot">[[</span><span class="dv">40000</span><span class="ot">,</span> <span class="dv">49999</span><span class="ot">]]</span><span class="fu">,</span> <span class="dt">&quot;time&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;kinds&quot;</span><span class="fu">:</span> <span class="ot">[[</span><span class="dv">30000</span><span class="ot">,</span> <span class="dv">39999</span><span class="ot">]]</span><span class="fu">,</span> <span class="dt">&quot;count&quot;</span><span class="fu">:</span> <span class="dv">1000</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;time&quot;</span><span class="fu">:</span> <span class="dv">3600</span><span class="fu">,</span> <span class="dt">&quot;count&quot;</span><span class="fu">:</span> <span class="dv">10000</span><span class="fu">}</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><code>retention</code> is a list of specifications: each will apply
to either all kinds, or a subset of kinds. Ranges may be specified for
the kind field as a tuple of inclusive start and end values. Events of
indicated kind (or all) are then limited to a <code>count</code> and/or
time period.</p>
<p>It is possible to effectively blacklist Nostr-based protocols that
rely on a specific <code>kind</code> number, by giving a retention time
of zero for those <code>kind</code> values. While that is unfortunate,
it does allow clients to discover servers that will support their
protocol quickly via a single HTTP fetch.</p>
<p>There is no need to specify retention times for <em>ephemeral
events</em> since they are not retained.</p>
<h3 id="content-limitations">Content Limitations</h3>
<p>Some relays may be governed by the arbitrary laws of a nation state.
This may limit what content can be stored in cleartext on those relays.
All clients are encouraged to use encryption to work around this
limitation.</p>
<p>It is not possible to describe the limitations of each country’s laws
and policies which themselves are typically vague and constantly
shifting.</p>
<p>Therefore, this field allows the relay operator to indicate which
countries’ laws might end up being enforced on them, and then indirectly
on their users’ content.</p>
<p>Users should be able to avoid relays in countries they don’t like,
and/or select relays in more favourable zones. Exposing this flexibility
is up to the client software.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;relay_countries&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">&quot;CA&quot;</span><span class="ot">,</span> <span class="st">&quot;US&quot;</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">...</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<ul>
<li><code>relay_countries</code>: a list of two-level ISO country codes
(ISO 3166-1 alpha-2) whose laws and policies may affect this relay.
<code>EU</code> may be used for European Union countries.</li>
</ul>
<p>Remember that a relay may be hosted in a country which is not the
country of the legal entities who own the relay, so it’s very likely a
number of countries are involved.</p>
<h3 id="community-preferences">Community Preferences</h3>
<p>For public text notes at least, a relay may try to foster a local
community. This would encourage users to follow the global feed on that
relay, in addition to their usual individual follows. To support this
goal, relays MAY specify some of the following values.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;language_tags&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;en&quot;</span><span class="ot">,</span> <span class="st">&quot;en-419&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;tags&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;sfw-only&quot;</span><span class="ot">,</span> <span class="st">&quot;bitcoin-only&quot;</span><span class="ot">,</span> <span class="st">&quot;anime&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;posting_policy&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/posting-policy.html&quot;</span><span class="fu">,</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">...</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<ul>
<li><p><code>language_tags</code> is an ordered list of <a
href="https://en.wikipedia.org/wiki/IETF_language_tag">IETF language
tags</a> indicating the major languages spoken on the relay.</p></li>
<li><p><code>tags</code> is a list of limitations on the topics to be
discussed. For example <code>sfw-only</code> indicates that only “Safe
For Work” content is encouraged on this relay. This relies on
assumptions of what the “work” “community” feels “safe” talking about.
In time, a common set of tags may emerge that allow users to find relays
that suit their needs, and client software will be able to parse these
tags easily. The <code>bitcoin-only</code> tag indicates that any
<em>altcoin</em>, <em>“crypto”</em> or <em>blockchain</em> comments will
be ridiculed without mercy.</p></li>
<li><p><code>posting_policy</code> is a link to a human-readable page
which specifies the community policies for the relay. In cases where
<code>sfw-only</code> is True, it’s important to link to a page which
gets into the specifics of your posting policy.</p></li>
</ul>
<p>The <code>description</code> field should be used to describe your
community goals and values, in brief. The <code>posting_policy</code> is
for additional detail and legal terms. Use the <code>tags</code> field
to signify limitations on content, or topics to be discussed, which
could be machine processed by appropriate client software.</p>
<h3 id="pay-to-relay">Pay-to-Relay</h3>
<p>Relays that require payments may want to expose their fee
schedules.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;payments_url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://my-relay/payments&quot;</span><span class="fu">,</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;fees&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;admission&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span> <span class="dt">&quot;amount&quot;</span><span class="fu">:</span> <span class="dv">1000000</span><span class="fu">,</span> <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;msats&quot;</span> <span class="fu">}</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;subscription&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span> <span class="dt">&quot;amount&quot;</span><span class="fu">:</span> <span class="dv">5000000</span><span class="fu">,</span> <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;msats&quot;</span><span class="fu">,</span> <span class="dt">&quot;period&quot;</span><span class="fu">:</span> <span class="dv">2592000</span> <span class="fu">}</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;publication&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span> <span class="dt">&quot;kinds&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">4</span><span class="ot">]</span><span class="fu">,</span> <span class="dt">&quot;amount&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span> <span class="dt">&quot;unit&quot;</span><span class="fu">:</span> <span class="st">&quot;msats&quot;</span> <span class="fu">}</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="er">...</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="icon">Icon</h3>
<p>A URL pointing to an image to be used as an icon for the relay.
Recommended to be squared in shape.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;icon&quot;</span><span class="fu">:</span> <span class="st">&quot;https://nostr.build/i/53866b44135a27d624e99c6165cabd76ac8f72797209700acb189fce75021f47.jpg&quot;</span><span class="fu">,</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">...</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="examples">Examples</h3>
<p>As of 2 May 2023 the following command provided these results:</p>
<p>``` ~&gt; curl -H “Accept: application/nostr+json”
https://eden.nostr.land | jq</p>
<p>{ “description”: “nostr.land family of relays (us-or-01)”, “name”:
“nostr.land”, “pubkey”:
“52b4a076bcbbbdc3a1aefa3735816cf74993b1b8db202b01c883c58be7fad8bd”,
“software”: “custom”, “supported_nips”: [ 1, 2, 4, 9, 11, 12, 16, 20,
22, 28, 33, 40 ], “version”: “1.0.1”, “limitation”: {
“payment_required”: true, “max_message_length”: 65535, “max_event_tags”:
2000, “max_subscriptions”: 20, “auth_required”: false }, “payments_url”:
“https://eden.nostr.land”, “fees”: { “subscription”: [ { “amount”:
2500000, “unit”: “msats”, “period”: 2592000 } ] }, }</p>
</body>
</html>
