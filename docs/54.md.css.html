<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>54</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="nip-54">NIP-54</h1>
<h2 id="wiki">Wiki</h2>
<p><code>draft</code> <code>optional</code></p>
<p>This NIP defines <code>kind:30818</code> (an <em>addressable
event</em>) for descriptions (or encyclopedia entries) of particular
subjects, and it’s expected that multiple people will write articles
about the exact same subjects, with either small variations or
completely independent content.</p>
<p>Articles are identified by lowercase, normalized ascii <code>d</code>
tags.</p>
<h3 id="articles">Articles</h3>
<div class="sourceCode" id="cb1"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;A wiki is a hypertext publication collaboratively edited and managed by its own audience.&quot;</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;tags&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">&quot;d&quot;</span><span class="ot">,</span> <span class="st">&quot;wiki&quot;</span><span class="ot">],</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">&quot;title&quot;</span><span class="ot">,</span> <span class="st">&quot;Wiki&quot;</span><span class="ot">],</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="d-tag-normalization-rules"><code>d</code> tag normalization
rules</h3>
<ul>
<li>Any non-letter character MUST be converted to a <code>-</code>.</li>
<li>All letters MUST be converted to lowercase.</li>
</ul>
<h3 id="content">Content</h3>
<p>The <code>content</code> should be Asciidoc with two extra
functionalities: <strong>wikilinks</strong> and <strong>nostr:…</strong>
links.</p>
<p>Unlike normal Asciidoc links <code>http://example.com[]</code> that
link to external webpages, wikilinks <code>[[]]</code> link to other
articles in the wiki. In this case, the wiki is the entirety of Nostr.
Clicking on a wikilink should cause the client to ask relays for events
with <code>d</code> tags equal to the target of that wikilink.</p>
<p>Wikilinks can take these two forms:</p>
<ol type="1">
<li><code>[[Target Page]]</code> – in this case it will link to the page
<code>target-page</code> (according to <code>d</code> tag normalization
rules above) and be displayed as <code>Target Page</code>;</li>
<li><code>[[target page|see this]]</code> – in this case it will link to
the page <code>target-page</code>, but will be displayed as
<code>see this</code>.</li>
</ol>
<p><code>nostr:...</code> links, as per <a href="21.md.css.html">NIP-21</a>,
should link to profiles or arbitrary Nostr events. Although it is not
recommended to link to specific versions of articles – instead the
<em>wikilink</em> syntax should be preferred, since it should be left to
the reader and their client to decide what version of any given article
they want to read.</p>
<h3 id="optional-extra-tags">Optional extra tags</h3>
<ul>
<li><code>title</code>: for when the display title should be different
from the <code>d</code> tag.</li>
<li><code>summary</code>: for display in lists.</li>
<li><code>a</code> and <code>e</code>: for referencing the original
event a wiki article was forked from.</li>
</ul>
<h3 id="merge-requests">Merge Requests</h3>
<p>Event <code>kind:818</code> represents a request to merge from a
forked article into the source. It is directed to a pubkey and
references the original article and the modified event.</p>
<p>[INSERT EVENT EXAMPLE]</p>
<h3 id="redirects">Redirects</h3>
<p>Event <code>kind:30819</code> is also defined to stand for “wiki
redirects”, i.e. if one thinks <code>Shell structure</code> should
redirect to <code>Thin-shell structure</code> they can issue one of
these events instead of replicating the content. These events can be
used for automatically redirecting between articles on a client, but
also for generating crowdsourced “disambiguation” pages (<a
href="https://en.wikipedia.org/wiki/Help:Disambiguation">common in
Wikipedia</a>).</p>
<p>[INSERT EVENT EXAMPLE]</p>
<h2 id="how-to-decide-what-article-to-display">How to decide what
article to display</h2>
<p>As there could be many articles for each given name, some kind of
prioritization must be done by clients. Criteria for this should vary
between users and clients, but some means that can be used are described
below:</p>
<h3 id="reactions">Reactions</h3>
<p><a href="25.md.css.html">NIP-25</a> reactions are very simple and can be used
to create a simple web-of-trust between wiki article writers and their
content. While just counting a raw number of “likes” is unproductive,
reacting to any wiki article event with a <code>+</code> can be
interpreted as a recommendation for that article specifically and a
partial recommendation of the author of that article. When 2 or 3-level
deep recommendations are followed, suddenly a big part of all the
articles may have some form of tagging.</p>
<h3 id="relays">Relays</h3>
<p><a href="51.md.css.html">NIP-51</a> lists of relays can be created with the
kind 10102 and then used by wiki clients in order to determine where to
query articles first and to rank these differently in relation to other
events fetched from other relays.</p>
<h3 id="contact-lists">Contact lists</h3>
<p><a href="02.md.css.html">NIP-02</a> contact lists can form the basis of a
recommendation system that is then expanded with relay lists and
reaction lists through nested queries. These lists form a good starting
point only because they are so widespread.</p>
<h3 id="wiki-related-contact-lists">Wiki-related contact lists</h3>
<p><a href="51.md.css.html">NIP-51</a> lists can also be used to create a list of
users that are trusted only in the context of wiki authorship or wiki
curationship.</p>
<h2 id="forks">Forks</h2>
<p>Wiki-events can tag other wiki-events with a <code>fork</code> marker
to specify that this event came from a different version. Both
<code>a</code> and <code>e</code> tags SHOULD be used and have the
<code>fork</code> marker applied, to identify the exact version it was
forked from.</p>
<h2 id="deference">Deference</h2>
<p>Wiki-events can tag other wiki-events with a <code>defer</code>
marker to indicate that it considers someone else’s entry as a “better”
version of itself. If using a <code>defer</code> marker both
<code>a</code> and <code>e</code> tags SHOULD be used.</p>
<p>This is a stronger signal of trust than a <code>+</code>
reaction.</p>
<p>This marker is useful when a user edits someone else’s entry; if the
original author includes the editor’s changes and the editor doesn’t
want to keep/maintain an independent version, the <code>link</code> tag
could effectively be a considered a “deletion” of the editor’s version
and putting that pubkey’s WoT weight behind the original author’s
version.</p>
<h2 id="why-asciidoc">Why Asciidoc?</h2>
<p>Wikitext is <a
href="nostr:nevent1qqsqt0gcggry60n72uglhuhypdlmr2dm6swjj69jex5v530gcpazlzsprpmhxue69uhhyetvv9ujumn0wdmksetjv5hxx.md.css.htmlqy28wumn8ghj7un9d3shjtnyv9kh2uewd9hsygpm7rrrljungc6q0tuh5hj7ue863q73qlheu4vywtzwhx42a7j9n5ueneex">garbage</a>
and Markdown is not powerful enough (besides being too freeform and
unspecified and prone to generate incompatibilities in the future).</p>
<p>Asciidoc has a strict spec, multiple implementations in many
languages, and support for features that are very much necessary in a
wiki article, like <em>sidebars</em>, <em>tables</em> (with rich markup
inside cells), many levels of <em>headings</em>, <em>footnotes</em>,
<em>superscript</em> and <em>subscript</em> markup and <em>description
lists</em>. It is also arguably easier to read in its plaintext format
than Markdown (and certainly much better than Wikitext).</p>
<h1 id="appendix-1-merge-requests">Appendix 1: Merge requests</h1>
<p>Users can request other users to get their entries merged into
someone else’s entry by creating a <code>kind:818</code> event.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;I added information about how to make hot ice-creams&quot;</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;kind&quot;</span><span class="fu">:</span> <span class="dv">818</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;tags&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span> <span class="st">&quot;a&quot;</span><span class="ot">,</span> <span class="st">&quot;30818:&lt;destination-pubkey&gt;:hot-ice-creams&quot;</span><span class="ot">,</span> <span class="st">&quot;&lt;relay-url&gt;&quot;</span> <span class="ot">],</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span> <span class="st">&quot;e&quot;</span><span class="ot">,</span> <span class="st">&quot;&lt;version-against-which-the-modification-was-made&gt;&quot;</span><span class="ot">,</span> <span class="st">&quot;&lt;relay-url&gt;&quot;</span> <span class="ot">],</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span> <span class="st">&quot;p&quot;</span><span class="ot">,</span> <span class="st">&quot;&lt;destination-pubkey&gt;&quot;</span> <span class="ot">],</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span> <span class="st">&quot;e&quot;</span><span class="ot">,</span> <span class="st">&quot;&lt;version-to-be-merged&gt;&quot;</span><span class="ot">,</span> <span class="st">&quot;&lt;relay-url&gt;&quot;</span><span class="ot">,</span> <span class="st">&quot;source&quot;</span> <span class="ot">]</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><code>.content</code>: an optional explanation detailing why this
merge is being requested. <code>a</code> tag: tag of the article which
should be modified (i.e. the target of this merge request).
<code>e</code> tag: optional version of the article in which this
modifications is based <code>e</code> tag with <code>source</code>
marker: the ID of the event that should be merged. This event id MUST be
of a <code>kind:30818</code> as defined in this NIP.</p>
<p>The destination-pubkey is the pubkey being requested to merge
something into their article can create [[NIP-25]] reactions that tag
the <code>kind:818</code> event with <code>+</code> or
<code>-</code></p>
</body>
</html>
